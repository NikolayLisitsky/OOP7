# Лабораторная работа №7: Асинхронное программирование

## Описание
Имитатор битвы между тремя типами персонажей:
- **Орк** (Ork) - движение: 20, убийство: 10
- **Странствующий Рыцарь** (Wandering Knight) - движение: 30, убийство: 10
- **Медведь** (Bear) - движение: 5, убийство: 10

## Структура проекта
├── include/
│ ├── npc.h # Базовый класс NPC
│ ├── ork.h # Класс Орка
│ ├── wandering_knight.h # Класс Странствующего Рыцаря
│ ├── bear.h # Класс Медведя
│ ├── editor.h # Утилиты для работы с NPC
│ ├── fightManager.h # Менеджер боев
│ └── utils.h # Вспомогательные функции
├── src/
│ ├── npc.cpp
│ ├── ork.cpp
│ ├── wandering_knight.cpp
│ ├── bear.cpp
│ ├── editor.cpp
│ ├── fightManager.cpp
│ └── utils.cpp
├── test/
│ └── test.cpp # Тесты
├── main.cpp # Главная программа
└── CMakeLists.txt # Файл сборки

## Сборка и запуск

### Требования
- CMake 3.14+
- Компилятор с поддержкой C++20
- Google Test (загружается автоматически)

### Сборка
```bash
mkdir build
cd build
cmake ..
cmake --build .
```
Запуск
```bash
./lab7_exe
```
Запуск тестов
```bash
./lab7_tests
```
## Особенности реализации
### Многопоточность
1) Основной поток: Отрисовка карты каждую секунду
2) Поток перемещения: Перемещение NPC и обнаружение столкновений
3) Поток боев: Обработка боевых событий

### Синхронизация
- Используется std::shared_mutex для безопасного доступа к данным NPC
- std::lock_guard для синхронизации вывода в консоль
- std::mutex для очереди событий в FightManager

### Логика боя
- При обнаружении NPC в радиусе убийства создается событие боя
- В бою каждый NPC бросает 6-гранный кубик
- Если атака больше защиты - происходит убийство
- Мертвые NPC не перемещаются и не отображаются на карте

### Параметры NPC
| Персонаж              | Расстояние хода | Расстояние убийства |
|-----------------------|-----------------|---------------------|
| **Орк**               | 20              | 10                  |
| **Рыцарь**            | 30              | 10                  |
| **Медведь**           | 5               | 20                  |

### Пример вывода
Generating 50 NPCs ...
Created ork: name: NPC_0 { x:42, y:15 }
Created wandering_knight: name: NPC_1 { x:19, y:25 }
...

[O][ ][ ][K][ ][B][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
...